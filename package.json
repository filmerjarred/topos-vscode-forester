{
   "name": "topos-vscode-forester",
   "displayName": "Topos VSCode Forester",
   "description": "Enhanced VSCode support for forester",
   "repository": "github:filmerjarred/topos-vscode-forester",
   "publisher": "JarredFilmer",
   "version": "0.2.0",
   "engines": {
      "vscode": "^1.86.0"
   },
   "markdown": "github",
   "icon": "resources/ForesterTopos.png",
   "categories": [
      "Programming Languages"
   ],
   "activationEvents": [
      "onLanguage:forester",
      "workspaceContains:**/*.tree",
      "workspaceContains:forest.toml"
   ],
   "main": "./out/extension.js",
   "contributes": {
      "commands": [
         {
            "command": "forester.newTree",
            "title": "New Tree",
            "category": "Forester",
            "icon": "$(diff-added)"
         },
         {
            "command": "forester.newFromTemplate",
            "title": "New Tree from Template",
            "category": "Forester",
            "icon": "$(file-add)"
         },
         {
            "command": "forester.transcludeNewTree",
            "title": "Transclude New Tree",
            "category": "Forester",
            "icon": "$(diff-added)"
         },
         {
            "command": "forester.showForestStructureView",
            "title": "Show Forest Structure View",
            "category": "Forester",
            "icon": "$(list-tree)"
         },
         {
            "command": "forester.refreshTreeView",
            "title": "Refresh",
            "category": "Forester",
            "icon": "$(refresh)"
         },
         {
            "command": "forester.collapseAllTreeView",
            "title": "Collapse All",
            "category": "Forester",
            "icon": "$(collapse-all)"
         },
         {
            "command": "forester.renameTree",
            "title": "Rename Tree",
            "category": "Forester",
            "icon": "$(edit)"
         },
         {
            "command": "forester.setDefaultPrefix",
            "title": "Set Default Prefix",
            "category": "Forester",
            "icon": "$(settings-gear)"
         },
         {
            "command": "forester.setDefaultTemplate",
            "title": "Set Default Template",
            "category": "Forester",
            "icon": "$(settings-gear)"
         },
         {
            "command": "forester.changeOpenBehaviour",
            "title": "Change Forester Open Behaviour",
            "category": "Forester",
            "icon": "$(settings-gear)"
         }
      ],
      "views": {
         "explorer": [
            {
               "type": "webview",
               "id": "foresterTreeView",
               "name": "Forester Structure",
               "icon": "$(symbol-namespace)",
               "contextualTitle": "Forester Structure",
               "when": "workspaceHasForesterFiles",
               "visibility": "hidden"
            }
         ]
      },
      "keybindings": [
         {
            "command": "forester.renameTree",
            "key": "ctrl+r",
            "mac": "cmd+r",
            "when": "editorTextFocus && resourceExtname == .tree"
         }
      ],
      "configuration": {
         "title": "Forester",
         "properties": {
            "forester.config": {
               "type": "string",
               "default": "",
               "markdownDescription": "Specifies the forester config file (defaults to `forest.toml`). This should usually be edited per workspace, instead of globally."
            },
            "forester.path": {
               "type": "string",
               "default": "forester",
               "description": "Specifies the path to forester. Note that VSCode usually does not inherit the shell PATH variable."
            },
            "forester.defaultPrefix": {
               "type": "string",
               "default": "",
               "description": "Default prefix for new trees (e.g., 'jms', 'ssl'). Will be prompted if not set."
            },
            "forester.defaultTemplate": {
               "type": "string",
               "default": "",
               "description": "Default template for new trees (e.g., 'daily', 'paper'). Will be prompted if not set. Use '(No template)' to skip template selection."
            },
            "forester.create.author": {
               "type": "string",
               "default": "",
               "description": "Default author for new trees (e.g., 'sophie-libkind'). Omitted if not set."
            },
            "forester.completion.showID": {
               "type": "boolean",
               "default": false,
               "description": "Controls whether the tree ID is shown in completions."
            },
            "forester.create.random": {
               "type": "boolean",
               "default": false,
               "description": "Controls whether the tree ID is generated randomly or sequentially."
            },
            "forester.decorations.enabled": {
               "type": "boolean",
               "default": true,
               "description": "Show inline title hints next to transclude/import/export commands."
            },
            "forester.taxonCustomization": {
               "type": "object",
               "default": {},
               "description": "Custom emoji and abbreviation settings for taxons. Use '$default' as a key to set the default emoji for unknown taxons. Example: { \"$default\": { \"emoji\": \"üìÑ\" }, \"proposition\": { \"emoji\": \"üìê\", \"abbreviation\": \"prop\" } }",
               "additionalProperties": {
                  "type": "object",
                  "properties": {
                     "emoji": {
                        "type": "string",
                        "description": "Custom emoji for this taxon"
                     },
                     "abbreviation": {
                        "type": "string",
                        "description": "Custom abbreviation for this taxon (used in table of contents)"
                     }
                  }
               }
            },
            "forester.create.openNewTreeMode": {
               "type": "string",
               "default": "background",
               "enum": [
                  "off",
                  "background",
                  "side",
                  "active"
               ],
               "enumDescriptions": [
                  "Do not open the new tree",
                  "Open the new tree in the background (default)",
                  "Open the new tree to the side",
                  "Open the new tree as the active editor"
               ],
               "description": "Controls how newly created trees are opened in the editor."
            }
         }
      },
      "configurationDefaults": {
         "[forester]": {
            "editor.wordWrap": "on",
            "editor.tabSize": 2,
            "editor.wordBasedSuggestions": "off"
         }
      },
      "languages": [
         {
            "id": "forester",
            "extensions": [
               ".tree"
            ],
            "configuration": "./resources/language/language-configuration.json"
         }
      ],
      "grammars": [
         {
            "language": "forester",
            "scopeName": "source.forester",
            "path": "./resources/language/forester.tmGrammar.json",
            "embeddedLanguages": {
               "embedded.latex": "latex"
            }
         }
      ],
      "menus": {
         "explorer/context": [
            {
               "command": "forester.new",
               "when": "explorerResourceIsFolder",
               "group": "navigation"
            },
            {
               "command": "forester.newFromTemplate",
               "when": "explorerResourceIsFolder",
               "group": "navigation"
            }
         ],
         "view/title": [
            {
               "command": "forester.refreshTreeView",
               "when": "view == foresterTreeView",
               "group": "navigation"
            },
            {
               "command": "forester.collapseAllTreeView",
               "when": "view == foresterTreeView",
               "group": "navigation"
            }
         ],
         "editor/context": [
            {
               "command": "forester.renameTree",
               "when": "resourceExtname == .tree",
               "group": "1_modification"
            }
         ]
      }
   },
   "scripts": {
      "vscode:prepublish": "npm run compile",
      "compile": "tsc -p ./",
      "build": "tsc -p ./",
      "watch": "tsc -watch -p ./",
      "lint": "eslint src --ext ts"
   },
   "devDependencies": {
      "@types/node": "18.x",
      "@types/vscode": "^1.86.0",
      "@typescript-eslint/eslint-plugin": "^6.19.1",
      "@typescript-eslint/parser": "^6.19.1",
      "eslint": "^8.56.0",
      "typescript": "^5.3.3"
   },
   "dependencies": {
      "@vscode/codicons": "^0.0.41",
      "smol-toml": "^1.5.2"
   }
}